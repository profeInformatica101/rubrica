<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuración de Endian UTM y Máquinas Virtuales</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .step-card { margin-bottom: 20px; }
        pre { background-color: #f8f9fa; padding: 15px; border-radius: 5px; white-space: pre-wrap; font-size: 14px; }
        .table { margin-top: 20px; }
        .alert-info { background-color: #e7f3fe; border-left: 5px solid #2196F3; padding: 10px; margin-top: 10px; }
        .alert-warning { background-color: #fff3cd; border-left: 5px solid #ff9800; padding: 10px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container mt-4">
    <h2 class="text-center">📌 Configuración de Endian UTM y Máquinas Virtuales</h2>

    <!-- Introducción -->
    <div class="alert alert-info">
        <p>Esta guía detalla la configuración de Endian UTM y máquinas virtuales utilizando VirtualBox. Se incluyen pasos de instalación, configuración de red y pruebas de seguridad.</p>
        <p><a href="script_instalacion.sh" class="btn btn-primary">📥 Descargar Script de Creación de Máquinas Virtuales</a></p>
    </div>

    <!-- Tabla Resumen -->
    <div class="card">
        <div class="card-header">
            <h5>📊 Tabla Resumen de Configuración</h5>
        </div>
        <div class="card-body">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Máquina</th>
                        <th>IP</th>
                        <th>Gateway</th>
                        <th>Función</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><strong>Endian UTM</strong></td><td>192.168.1.1 / 192.168.2.1 / DHCP</td><td>-</td><td>Firewall</td></tr>
                    <tr><td><strong>PC1_LAN</strong></td><td>192.168.1.100</td><td>192.168.1.1</td><td>Cliente LAN</td></tr>
                    <tr><td><strong>Public_Web</strong></td><td>192.168.2.100</td><td>192.168.2.1</td><td>Servidor Web DMZ</td></tr>
                    <tr><td><strong>PCINTERNET</strong></td><td>DHCP</td><td>-</td><td>Equipo externo</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Paso 1: Creación de Máquinas Virtuales -->
    <div class="card step-card">
        <div class="card-header" data-bs-toggle="collapse" href="#step1">
            <h5>1️⃣ Creación de Máquinas Virtuales con VirtualBox</h5>
        </div>
        <div id="step1" class="collapse show">
            <div class="card-body">
                <h6>📌 Configuración de Cliente_LAN (Linux Lite con Entorno Gráfico)</h6>
                <pre>
# Configuración de red en Cliente_LAN (Linux Lite)
auto enp0s3
iface enp0s3 inet static
    address 192.168.1.100
    netmask 255.255.255.0
    gateway 192.168.1.1
    dns-nameservers 8.8.8.8 1.1.1.1
                </pre>
            </div>
        </div>
    </div>

    <!-- Paso 2: Instalación de Sistemas Operativos -->
    <div class="card step-card">
        <div class="card-header" data-bs-toggle="collapse" href="#step2">
            <h5>2️⃣ Instalación de Sistemas Operativos</h5>
        </div>
        <div id="step2" class="collapse">
            <div class="card-body">
                <h6>💻 Instalación de Cliente_LAN</h6>
                <pre>
1. Iniciar la máquina Cliente_LAN e instalar Linux Lite.
2. Configurar la red según la configuración establecida.
3. Probar conectividad con Endian UTM y acceso a Internet.
                </pre>
                
                <h6>💻 Configuración de Endian UTM</h6>
                <pre>
1. Iniciar la máquina Endian_UTM e instalar el sistema.
2. Configurar interfaces de red:
   - GREEN (LAN): 192.168.1.1/24
   - ORANGE (DMZ): 192.168.2.1/24
   - RED (WAN): DHCP
3. Reiniciar y acceder desde Cliente_LAN:
   👉 https://192.168.1.1:10443/
                </pre>
                
                <h6>🌐 Configuración de Servidor DMZ con una Web Sencilla</h6>
                <pre>
# Configuración de red en Servidor DMZ
auto enp0s3
iface enp0s3 inet static
    address 192.168.2.100
    netmask 255.255.255.0
    gateway 192.168.2.1
    dns-nameservers 8.8.8.8 1.1.1.1

# Instalación de Apache en Debian
sudo apt update && sudo apt install apache2 -y

# Creación de una página web simple
<code>echo "&lt;h1&gt;Servidor DMZ funcionando&lt;/h1&gt;" | sudo tee /var/www/html/index.html</code>

# Reiniciar el servicio
sudo systemctl restart apache2
                </pre>
            </div>
        </div>
    </div>

    <!-- Navegación de pestañas -->
    <ul class="nav nav-tabs mt-4" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="resumen-tab" data-bs-toggle="tab" data-bs-target="#resumen" type="button" role="tab" aria-controls="resumen" aria-selected="true">📋 Resumen Rápido</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="comandos-tab" data-bs-toggle="tab" data-bs-target="#comandos_utiles" type="button" role="tab" aria-controls="comandos_utiles" aria-selected="false">🔧 Comandos Útiles</button>
        </li>
    </ul>

    <!-- Contenido de las pestañas -->
    <div class="tab-content" id="myTabContent">
        <!-- Resumen Rápido -->
        <div id="resumen" class="container tab-pane fade show active" role="tabpanel" aria-labelledby="resumen-tab">
            <h4 class="mt-3">📋 Resumen Rápido</h4>
            <pre id="resumenConfig">
# Configurar IP temporal
sudo ip addr add 192.168.1.100/24 dev enp0s3

# Configurar Gateway
sudo ip route add default via 192.168.1.1

# Configurar DNS
echo "nameserver 8.8.8.8" | sudo tee /etc/resolv.conf

# Hacer cambios permanentes (Editar archivo de red)
sudo nano /etc/network/interfaces

# Reiniciar la red
sudo systemctl restart networking
            </pre>
        </div>

        <!-- Comandos Útiles -->
        <div id="comandos_utiles" class="container tab-pane fade" role="tabpanel" aria-labelledby="comandos-tab">
            <h4 class="mt-3">🔧 Comandos Útiles para Redes</h4>
            <pre id="comandosUtiles">
# Ver interfaces de red:
ip addr show

# Mostrar la tabla de enrutamiento:
ip route show

# Configurar IP temporalmente:
sudo ip addr add 192.168.1.100/24 dev enp0s3

# Configurar Gateway:
sudo ip route add default via 192.168.1.1

# Comprobar conectividad:
ping 8.8.8.8
ping 192.168.1.1
            </pre>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>